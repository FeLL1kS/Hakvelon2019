!function(t){var s={};function e(i){if(s[i])return s[i].exports;var a=s[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)e.d(i,a,function(s){return t[s]}.bind(null,a));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s);const i=6,a=430,n=50,o=50,h=50,r=120,l="https://hakvelon2019.wbydcloud.com";class c{constructor(t,s,e,i){this.person=t,this.pos={x:s,y:e},this.constPos={x:s,y:e},this.generateNewAim(),this.resetFlag(),this.speed=.5*Math.random(),this.interestPos=[],this.startAngle=2*Math.PI*Math.random();let a=2*Math.PI/this.person.interests.length;for(let t in this.person.interests){let s=t*a+this.startAngle+(Math.random()-.5)*Math.PI/3;this.interestPos.push({x:this.pos.x+r*Math.cos(s),y:this.pos.y+r*Math.sin(s),a:s})}}generateNewAim(){this.aim={x:this.constPos.x+(2*Math.random()-1)*o,y:this.constPos.y+(2*Math.random()-1)*o}}resetFlag(){this.flag={x:!1,y:!1}}draw(t,s){let e=!1;t.beginPath(),t.arc(this.pos.x,this.pos.y,n,0,2*Math.PI,!1),t.isPointInPath(s.x,s.y)&&(e=!0),t.lineWidth=5,t.strokeStyle="#003300",t.stroke(),e&&(t.beginPath(),t.fillStyle="black",t.fillText(this.person.name,this.pos.x-.5*this.person.name.length*5,this.pos.y),t.fill());for(let s in this.person.interests){let e=this.pos.x+r*Math.cos(this.interestPos[s].a),i=this.pos.y+r*Math.sin(this.interestPos[s].a);t.beginPath(),t.arc(e,i,h,0,2*Math.PI,!1),t.lineWidth=5,t.strokeStyle="#003300",t.stroke(),t.beginPath(),t.fillStyle="black",t.moveTo(this.pos.x+n*Math.cos(this.interestPos[s].a),this.pos.y+n*Math.sin(this.interestPos[s].a)),t.lineTo(e+h*Math.cos(this.interestPos[s].a+Math.PI),i+h*Math.sin(this.interestPos[s].a+Math.PI)),t.stroke(),t.beginPath(),t.fillStyle="black",t.fillText(this.person.interests[s],e-.5*this.person.interests[s].length*5,i),t.fill()}}update(){this.flag.x=this.aim.x>this.constPos.x&&this.pos.x>this.aim.x||this.aim.x<this.constPos.x&&this.pos.x<this.aim.x,this.flag.x||(this.pos.x>this.aim.x?this.pos.x-=this.speed:this.pos.x+=this.speed),this.flag.y=this.aim.y>this.constPos.y&&this.pos.y>this.aim.y||this.aim.y<this.constPos.y&&this.pos.y<this.aim.y,this.flag.y||(this.pos.y>this.aim.y?this.pos.y-=this.speed:this.pos.y+=this.speed),this.flag.x&&this.flag.y&&(this.generateNewAim(),this.resetFlag())}}class d{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight;let s=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=s.createSVGMatrix();this.ctx.getTransform=function(){return e};let i=[],a=this.ctx.save;this.ctx.save=()=>(i.push(e.translate(0,0)),a.call(this.ctx));let n=this.ctx.restore;this.ctx.restore=()=>(e=i.pop(),n.call(this.ctx));let o=this.ctx.scale;this.ctx.scale=(t,s)=>(e=e.scaleNonUniform(t,s),o.call(this.ctx,t,s));let h=this.ctx.rotate;this.ctx.rotate=t=>(e=e.rotate(180*t/Math.PI),h.call(this.ctx,t));let r=this.ctx.translate;this.ctx.translate=(t,s)=>(e=e.translate(t,s),r.call(this.ctx,t,s));let l=this.ctx.transform;this.ctx.transform=(t,i,a,n,o,h)=>{let r=s.createSVGMatrix();return r.a=t,r.b=i,r.c=a,r.d=n,r.e=o,r.f=h,e=e.multiply(r),l.call(this.ctx,t,i,a,n,o,h)};let c=this.ctx.setTransform;this.ctx.setTransform=(t,s,i,a,n,o)=>(e.a=t,e.b=s,e.c=i,e.d=a,e.e=n,e.f=o,c.call(this.ctx,t,s,i,a,n,o));let d=s.createSVGPoint();this.ctx.transformedPoint=(t,s)=>(d.x=t,d.y=s,d.matrixTransform(e.inverse())),this.scaleFactor=1.1;let x,f=this.canvas.width/2,u=this.canvas.height/2;this.canvas.addEventListener("mousedown",t=>{document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",f=t.offsetX||t.pageX-this.canvas.offsetLeft,u=t.offsetY||t.pageY-this.canvas.offsetTop,x=this.ctx.transformedPoint(f,u)},!1),this.canvas.addEventListener("mousemove",t=>{if(f=t.offsetX||t.pageX-this.canvas.offsetLeft,u=t.offsetY||t.pageY-this.canvas.offsetTop,x){let t=this.ctx.transformedPoint(f,u);this.ctx.translate(t.x-x.x,t.y-x.y),this.draw()}},!1),this.canvas.addEventListener("mouseup",t=>{x=null},!1);const p=t=>{let s=this.ctx.transformedPoint(f,u);this.ctx.translate(s.x,s.y);let e=Math.pow(this.scaleFactor,t);this.ctx.scale(e,e),this.ctx.translate(-s.x,-s.y),this.draw()},m=t=>{let s=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;return s&&p(s),t.preventDefault()&&!1};this.canvas.addEventListener("DOMMouseScroll",m,!1),this.canvas.addEventListener("mousewheel",m,!1),this.mouse={x:0,y:0},this.canvas.onmousemove=t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY},this.persons=[]}build(t){let s=1,e=0,n=0,o=2*Math.PI*Math.random();this.persons=t.map((t,h)=>{let r,l=2*Math.PI/s;if(h){let t=n*a;r={x:window.innerWidth/2+t*Math.cos(l*(h-1)+o),y:window.innerHeight/2+t*Math.sin(l*(h-1)+o)}}else r={x:window.innerWidth/2,y:window.innerHeight/2};return++e%s==0&&(e=1,s+=i,n++),new c(t,r.x,r.y,this.canvas)}),console.log(this.persons)}update(){for(let t of this.persons)t.update()}draw(){let t=this.ctx.transformedPoint(0,0),s=this.ctx.transformedPoint(this.canvas.width,this.canvas.height);this.ctx.clearRect(t.x,t.y,s.x-t.x,s.y-t.y);for(let t of this.persons)t.draw(this.ctx,this.mouse)}animate(){const t=s=>{this.update(),this.draw(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}(async()=>{try{const t=new d("canvas");let s=await async function(t,s){if("user/getList"==t)return[{name:"Oleg",interests:["Gay Porn","Loli"]},{name:"Danila",interests:["Coding","Loli","Cats","JavaScrpit"]},{name:"Alex",interests:["Coding","AI","Python"]}];let e=[l.trim("/"),"api",t].join("/"),i=await fetch(e,{method:"POST",data:JSON.stringify(s)}),a=await i.json();return a.success?a.data:(alert(a.message),null)}("user/getList");t.build(s),t.animate()}catch(t){console.log(t)}})()}]);
//# sourceMappingURL=app.js.map